#N canvas 608 369 680 889 10;
#X declare -path abs;
#X obj 2 3 cnv 15 349 299 empty empty empty 20 12 1 20 #000000 #dcdcdc 0;
#N canvas 502 54 450 300 notes 0;
#X text 8 44 - PAN follows a triangular random distribution.;
#X text 8 4 - Triangular random distribution with an exponential factor for most parameters.;
#X text 8 104 - Deviations from the mean are expressed in percentage or the total range.;
#X text 8 74 - Values ouside the valid ranges are mirrored back.;
#X restore 265 335 pd notes;
#X obj 30 89 cnv 15 80 180 empty empty MEAN 10 170 1 10 #404040 #b8b8b8 0;
#X obj 37 220 nbx 5 20 5 2000 0 0 \$0-grainDur.m \$0-load.grainDur.m duration 0 -14 1 14 #000000 #fcfcfc #fcfcfc 0 256;
#X obj 37 170 nbx 5 20 20 5000 0 0 \$0-iot.m \$0-load.iot.m iot 0 -14 1 14 #000000 #fcfcfc #fcfcfc 0 256;
#X obj 37 119 nbx 5 20 0 10000 0 0 \$0-delread.m \$0-load.delread.m delread 0 -14 1 14 #000000 #fcfcfc #fcfcfc 0 256;
#X obj 30 59 nbx 2 20 0 30 0 0 \$0-voices \$0-load.voices grains 0 -14 1 14 #202020 #fcfcfc #fcfcfc 0 256;
#X obj 111 89 cnv 15 56 180 empty empty DEV 7 170 1 10 #606060 #202020 0;
#X obj 115 220 nbx 3 20 0 100 0 0 \$0-grainDur.d \$0-load.grainDur.d empty 52 8 1 14 #000000 #fcfcfc #fcfcfc 0 256;
#X obj 115 170 nbx 3 20 0 100 0 0 \$0-iot.d \$0-load.iot.d empty 52 8 1 14 #000000 #fcfcfc #fcfcfc 0 256;
#X obj 115 119 nbx 3 20 0 100 0 0 \$0-delread.d \$0-load.delread.d empty 62 8 1 14 #000000 #fcfcfc #000000 0 256;
#X obj 190 89 cnv 15 80 180 empty empty MEAN 10 170 1 10 #404040 #b8b8b8 0;
#X obj 271 89 cnv 15 56 180 empty empty DEV 2 170 1 10 #606060 #202020 0;
#X obj 198 219 nbx 5 20 -12 12 0 0 \$0-pitch.m \$0-load.pitch.m pitch 0 -14 1 14 #000000 #fcfcfc #fcfcfc 0 256;
#X obj 198 119 nbx 5 20 1 99 0 0 \$0-env.m \$0-load.env.m envelope 0 -14 1 14 #000000 #fcfcfc #fcfcfc 0 256;
#X obj 198 169 nbx 5 20 60 112 0 0 \$0-amp.m \$0-load.amp.m dynamics 0 -14 1 14 #000000 #fcfcfc #fcfcfc 0 256;
#X obj 275 219 nbx 3 20 0 100 0 0 \$0-pitch.d \$0-load.pitch.d empty 52 8 1 14 #000000 #fcfcfc #000000 0 256;
#X obj 276 169 nbx 3 20 0 100 0 0 \$0-amp.d \$0-load.amp.d empty 52 8 1 14 #000000 #fcfcfc #fcfcfc 0 256;
#X obj 276 119 nbx 3 20 0 100 0 0 \$0-env.d \$0-load.env.d empty 52 8 1 14 #000000 #fcfcfc #000000 0 256;
#X floatatom 527 40 10 0 0 0 - \$0-set.buffSize \$0-init.buffSize 0;
#X text 418 40 buffer size (ms):;
#X text 400 220 max. amplitude (dB):;
#X text 400 200 min. amplitude (dB):;
#X text 370 180 max. grain duration (ms):;
#X text 370 160 min. grain duration (ms):;
#X text 376 240 min. transposition (st):;
#X text 376 260 max. transposition (st):;
#X text 369 21 =====================================;
#X text 477 10 INSTRUMENT SETTINGS;
#X text 388 60 max. number of voices:;
#X floatatom 527 60 10 0 0 0 - \$0-set.maxVoices \$0-init.maxVoices 0;
#X floatatom 527 160 10 0 0 0 - \$0-set.grainDur.min \$0-init.grainDur.min 0;
#X floatatom 527 180 10 0 0 0 - \$0-set.grainDur.max \$0-init.grainDur.max 0;
#X floatatom 527 200 10 0 0 0 - \$0-set.amp.min \$0-init.amp.min 0;
#X floatatom 527 220 10 0 0 0 - \$0-set.amp.max \$0-init.amp.max 0;
#X floatatom 527 240 10 0 0 0 - \$0-set.pitch.min \$0-init.pitch.min 0;
#X floatatom 527 260 10 0 0 0 - \$0-set.pitch.max \$0-init.pitch.max 0;
#X floatatom 527 80 10 0 0 0 - \$0-set.iot.min \$0-init.iot.min 0;
#X floatatom 527 100 10 0 0 0 - \$0-set.iot.max \$0-init.iot.max 0;
#X text 358 80 min. inter-onset time (ms):;
#X text 358 100 max. inter-onset time (ms):;
#X floatatom 527 120 10 0 0 0 - \$0-set.env.min \$0-init.env.min 0;
#X floatatom 527 140 10 0 0 0 - \$0-set.env.max \$0-init.env.max 0;
#X text 382 120 min. envelope (attack):;
#X text 388 140 max. envelope (decay):;
#X obj 527 281 bng 15 250 50 0 \$0-apply empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X text 436 280 apply changes:;
#X obj 57 335 s \$0-randCurve;
#X floatatom 57 314 5 0 0 0 - - - 0;
#N canvas 372 349 435 317 multiple-instances 0;
#X obj 32 89 until;
#X obj 58 139 + 1;
#X msg 98 89 clear;
#X obj 32 162 t f f;
#X obj 51 56 t f b b;
#X obj 59 185 * 25;
#X obj 59 205 + 25;
#X msg 70 89 1;
#X obj 32 140 f 1;
#X obj 14 226 pack f f \$0;
#X obj 98 278 s pd-grains;
#X obj 51 34 r \$0-init.maxVoices;
#X msg 248 99 clear;
#X obj 221 34 r \$0-init.buffSize;
#X obj 221 56 t f b;
#X msg 221 144 obj 25 25 inputBuffer \$2 \$1;
#X obj 221 122 pack 0 \$0;
#X obj 248 168 s pd-input;
#X obj 129 57 r \$0-pre.load;
#X msg 14 248 obj 25 \$2 inputGrainOcto \$3 \$1;
#X connect 0 0 8 0;
#X connect 1 0 8 1;
#X connect 2 0 10 0;
#X connect 3 0 9 0;
#X connect 3 1 5 0;
#X connect 4 0 0 0;
#X connect 4 1 7 0;
#X connect 4 2 2 0;
#X connect 5 0 6 0;
#X connect 6 0 9 1;
#X connect 7 0 8 1;
#X connect 8 0 1 0;
#X connect 8 0 3 0;
#X connect 9 0 19 0;
#X connect 11 0 4 0;
#X connect 12 0 17 0;
#X connect 13 0 14 0;
#X connect 14 0 16 0;
#X connect 14 1 12 0;
#X connect 15 0 17 0;
#X connect 16 0 15 0;
#X connect 18 0 12 0;
#X connect 18 0 2 0;
#X connect 19 0 10 0;
#X restore 4 357 pd multiple-instances;
#N canvas 1001 308 215 974 grains 0;
#X obj 25 50 inputGrainOcto 1017 1;
#X obj 25 75 inputGrainOcto 1017 2;
#X obj 25 100 inputGrainOcto 1017 3;
#X obj 25 125 inputGrainOcto 1017 4;
#X obj 25 150 inputGrainOcto 1017 5;
#X obj 25 175 inputGrainOcto 1017 6;
#X obj 25 200 inputGrainOcto 1017 7;
#X obj 25 225 inputGrainOcto 1017 8;
#X obj 25 250 inputGrainOcto 1017 9;
#X obj 25 275 inputGrainOcto 1017 10;
#X obj 25 300 inputGrainOcto 1017 11;
#X obj 25 325 inputGrainOcto 1017 12;
#X obj 25 350 inputGrainOcto 1017 13;
#X obj 25 375 inputGrainOcto 1017 14;
#X obj 25 400 inputGrainOcto 1017 15;
#X obj 25 425 inputGrainOcto 1017 16;
#X obj 25 450 inputGrainOcto 1017 17;
#X obj 25 475 inputGrainOcto 1017 18;
#X obj 25 500 inputGrainOcto 1017 19;
#X obj 25 525 inputGrainOcto 1017 20;
#X obj 25 550 inputGrainOcto 1017 21;
#X obj 25 575 inputGrainOcto 1017 22;
#X obj 25 600 inputGrainOcto 1017 23;
#X obj 25 625 inputGrainOcto 1017 24;
#X obj 25 650 inputGrainOcto 1017 25;
#X obj 25 675 inputGrainOcto 1017 26;
#X obj 25 700 inputGrainOcto 1017 27;
#X obj 25 725 inputGrainOcto 1017 28;
#X obj 25 750 inputGrainOcto 1017 29;
#X obj 25 775 inputGrainOcto 1017 30;
#X restore 137 357 pd grains;
#N canvas 503 179 303 271 input 0;
#X obj 25 25 inputBuffer 1017 10000;
#X restore 198 357 pd input;
#X text 2 376 (grain and input instances inside the subpatches);
#N canvas 1113 546 540 457 load 0;
#X obj 33 40 loadbang;
#X msg 20 387 \; pd dsp 1;
#X obj 20 17 inlet;
#X msg 20 85 bang \; pd dsp 0 \; \$1-pre.load bang;
#X obj 20 63 \$0;
#X obj 20 362 del 500;
#X obj 20 134 del 1000;
#X obj 29 157 \$0;
#X obj 190 154 \$0;
#X obj 190 104 r \$0-pre.load;
#X obj 190 127 del 100;
#X text 217 157 default parameters;
#X msg 29 178 \; \$1-apply bang \; \$1-load.voices 3 \; \$1-load.delread.m 1000 \; \$1-load.iot.m 100 \; \$1-load.grainDur.m 80 \; \$1-load.env.m 50 \; \$1-load.amp.m 90 \; \$1-load.pitch.m 0 \; \$1-load.delread.d 20 \; \$1-load.iot.d 30 \; \$1-load.grainDur.d 3 \; \$1-load.env.d 50 \; \$1-load.amp.d 20 \; \$1-load.pitch.d 1;
#X text 96 34 this loadbang should be connected in order to initialise its parameters, f 38;
#X msg 190 176 \; \$1-set.buffSize 10000 \; \$1-set.maxVoices 30 \; \$1-set.iot.min 20 \; \$1-set.iot.max 5000 \; \$1-set.grainDur.min 5 \; \$1-set.grainDur.max 2000 \; \$1-set.env.min 1 \; \$1-set.env.max 99 \; \$1-set.amp.min 60 \; \$1-set.amp.max 112 \; \$1-set.pitch.min -12 \; \$1-set.pitch.max 12;
#X connect 0 0 4 0;
#X connect 2 0 4 0;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 5 0 1 0;
#X connect 6 0 5 0;
#X connect 6 0 7 0;
#X connect 7 0 12 0;
#X connect 8 0 14 0;
#X connect 9 0 10 0;
#X connect 10 0 8 0;
#X restore 5 335 pd load;
#X obj 5 313 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#N canvas 341 145 1162 761 presetst 0;
#X listbox 77 276 48 0 0 0 - - - 36;
#X obj 77 329 list prepend \$0;
#X msg 77 350 \; \$1-apply bang \; \$1-load.voices \$14 \; \$1-load.delread.m \$2 \; \$1-load.iot.m \$4 \; \$1-load.grainDur.m \$6 \; \$1-load.env.m \$8 \; \$1-load.amp.m \$10 \; \$1-load.pitch.m \$12 \; \$1-load.delread.d \$3 \; \$1-load.iot.d \$5 \; \$1-load.grainDur.d \$7 \; \$1-load.env.d \$9 \; \$1-load.amp.d \$11 \; \$1-load.pitch.d \$13;
#X text 120 251 DELAY;
#X text 256 253 IOT;
#X text 397 242 DURATION;
#X text 537 242 ENVELOPE;
#X text 660 251 VOLUME;
#X text 914 254 GRAINS;
#X text 805 255 TRANSPOSITION;
#X msg 124 195 5000 100 1000 100 500 50 100 50 100 10 0 1 5;
#X msg 103 165 1000 100 1000 10 800 10 100 50 100 10 0 5 2;
#X text 43 169 CAVALL;
#X msg 82 133 500 10 400 20 150 30 1 10 100 0 0 1 10;
#X text 34 133 TOFEGA;
#X obj 83 19 pgmin, f 9;
#X floatatom 134 42 5 0 0 0 - - - 0;
#X floatatom 83 42 5 0 0 0 - - - 0;
#X obj 134 64 == 3;
#X obj 83 86 spigot 0;
#X text 403 197 35 computer en voz serp al carrer;
#X obj 82 109 sel 3 19 35;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 10 0 0 0;
#X connect 11 0 0 0;
#X connect 13 0 0 0;
#X connect 15 0 17 0;
#X connect 15 1 16 0;
#X connect 16 0 18 0;
#X connect 17 0 19 0;
#X connect 18 0 19 1;
#X connect 19 0 21 0;
#X connect 21 0 13 0;
#X connect 21 1 11 0;
#X connect 21 2 10 0;
#X restore 325 335 pd presetst;
#N canvas 705 271 1037 678 mapping 0;
#X msg 149 126 range \$1 \$2;
#X obj 149 104 pack 0 0;
#X obj 149 80 t b f;
#X obj 19 15 r \$0-init.maxVoices;
#X obj 19 62 s \$0-load.voices;
#X msg 149 343 range \$1 \$2;
#X obj 149 321 pack 0 0;
#X obj 167 297 t b f;
#X obj 149 205 r \$0-init.grainDur.min;
#X obj 159 228 value \$0-grainDur.min;
#X obj 167 252 r \$0-init.grainDur.max;
#X obj 177 275 value \$0-grainDur.max;
#X obj 149 366 s \$0-load.grainDur.m;
#X obj 159 38 value \$0-delread.max;
#X obj 149 149 s \$0-load.delread.m;
#X obj 159 58 value \$0-delread.min;
#X msg 149 533 range \$1 \$2;
#X obj 149 511 pack 0 0;
#X obj 167 487 t b f;
#X obj 149 395 r \$0-init.iot.min;
#X obj 159 418 value \$0-iot.min;
#X obj 167 442 r \$0-init.iot.max;
#X obj 177 465 value \$0-iot.max;
#X obj 149 556 s \$0-load.iot.m;
#X msg 329 343 range \$1 \$2;
#X obj 329 321 pack 0 0;
#X obj 347 297 t b f;
#X msg 329 533 range \$1 \$2;
#X obj 329 511 pack 0 0;
#X obj 347 487 t b f;
#X msg 329 153 range \$1 \$2;
#X obj 329 131 pack 0 0;
#X obj 347 107 t b f;
#X obj 329 205 r \$0-init.amp.min;
#X obj 339 228 value \$0-amp.min;
#X obj 347 252 r \$0-init.amp.max;
#X obj 357 275 value \$0-amp.max;
#X obj 329 366 s \$0-load.amp.m;
#X obj 329 395 r \$0-init.pitch.min;
#X obj 339 418 value \$0-pitch.min;
#X obj 347 442 r \$0-init.pitch.max;
#X obj 357 465 value \$0-pitch.max;
#X obj 329 556 s \$0-load.pitch.m;
#X obj 329 176 s \$0-load.env.m;
#X obj 329 15 r \$0-init.env.min;
#X obj 339 38 value \$0-env.min;
#X obj 347 62 r \$0-init.env.max;
#X obj 357 85 value \$0-env.max;
#X obj 149 15 r \$0-init.buffSize;
#X msg 19 39 range 0 \$1;
#X connect 0 0 14 0;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X connect 2 1 1 1;
#X connect 3 0 49 0;
#X connect 5 0 12 0;
#X connect 6 0 5 0;
#X connect 7 0 6 0;
#X connect 7 1 6 1;
#X connect 8 0 6 0;
#X connect 8 0 9 0;
#X connect 10 0 7 0;
#X connect 10 0 11 0;
#X connect 16 0 23 0;
#X connect 17 0 16 0;
#X connect 18 0 17 0;
#X connect 18 1 17 1;
#X connect 19 0 17 0;
#X connect 19 0 20 0;
#X connect 21 0 18 0;
#X connect 21 0 22 0;
#X connect 24 0 37 0;
#X connect 25 0 24 0;
#X connect 26 0 25 0;
#X connect 26 1 25 1;
#X connect 27 0 42 0;
#X connect 28 0 27 0;
#X connect 29 0 28 0;
#X connect 29 1 28 1;
#X connect 30 0 43 0;
#X connect 31 0 30 0;
#X connect 32 0 31 0;
#X connect 32 1 31 1;
#X connect 33 0 25 0;
#X connect 33 0 34 0;
#X connect 35 0 26 0;
#X connect 35 0 36 0;
#X connect 38 0 28 0;
#X connect 38 0 39 0;
#X connect 40 0 29 0;
#X connect 40 0 41 0;
#X connect 44 0 31 0;
#X connect 44 0 45 0;
#X connect 46 0 32 0;
#X connect 46 0 47 0;
#X connect 48 0 2 0;
#X connect 48 0 13 0;
#X connect 49 0 4 0;
#X restore 151 335 pd mapping ranges;
#X obj 267 356 declare -path abs;
#X text 9 401 INPUT;
#X text 9 411 ====================================;
#X obj 251 447 hip~ 5;
#X text 248 397 OUTPUT;
#X text 248 407 ====================================;
#X obj 251 426 catch~ \$0-Out-1;
#X obj 251 756 dac~ 1 2 3 4 5 6 7 8, f 24;
#X obj 271 487 hip~ 5;
#X obj 291 527 hip~ 5;
#X obj 311 567 hip~ 5;
#X obj 331 607 hip~ 5;
#X obj 351 647 hip~ 5;
#X obj 371 687 hip~ 5;
#X obj 392 727 hip~ 5;
#X obj 271 466 catch~ \$0-Out-2;
#X obj 291 506 catch~ \$0-Out-3;
#X obj 311 546 catch~ \$0-Out-4;
#X obj 331 586 catch~ \$0-Out-5;
#X obj 351 626 catch~ \$0-Out-6;
#X obj 371 666 catch~ \$0-Out-7;
#X obj 392 706 catch~ \$0-Out-8;
#X obj 12 804 s~ \$0-input;
#X obj 11 429 adc~ 1;
#X obj 12 577 *~;
#X obj 27 532 line~;
#X msg 27 512 \$1 100;
#X obj 30 473 hsl 128 15 0 2 0 0 empty empty empty -2 -8 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 27 556 *~;
#X floatatom 34 493 5 0 0 0 - - - 0;
#X obj 31 633 vu 16 160 empty empty -1 -8 0 10 #404040 #000000 1 0;
#N canvas 329 161 625 417 vu 0;
#X obj 59 129 env~ 1024;
#X obj 161 111 abs~;
#X obj 161 213 snapshot~;
#X obj 161 256 rmstodb;
#X obj 161 21 inlet~;
#X obj 161 288 - 100;
#X obj 59 287 - 100;
#X obj 59 361 outlet;
#X obj 161 361 outlet;
#X text 344 307 Check the help file of env~ and slop~ for more details., f 31;
#X obj 239 89 expr 1000 / $f1;
#X floatatom 239 117 5 0 0 0 - - - 0;
#X obj 161 146 slop~ 0 0 0 0 1e+09;
#X floatatom 239 57 5 0 0 0 - - - 0;
#X text 359 89 convert to hz;
#X text 282 118 hz;
#X text 284 57 peak decay time in ms;
#X obj 59 171 t f b;
#X text 345 132 The env~ object is dedicated to RMS analysis. Its output is in dB (0-100 range \, pd style) but needs to be converted to dBFS (and we do that by simply subtracting 100)., f 31;
#X text 345 225 The slop~ object is used here for peak detection. We need to convert the output to dB with rmstodb and also subtract by 100 to convert it to dBFS., f 31;
#X msg 239 31 500;
#X obj 238 8 loadbang;
#X connect 0 0 17 0;
#X connect 1 0 12 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 0 0;
#X connect 4 0 1 0;
#X connect 5 0 8 0;
#X connect 6 0 7 0;
#X connect 10 0 11 0;
#X connect 11 0 12 3;
#X connect 12 0 2 0;
#X connect 13 0 10 0;
#X connect 17 0 6 0;
#X connect 17 1 2 0;
#X connect 20 0 13 0;
#X connect 21 0 20 0;
#X restore 25 603 pd vu;
#X text 72 602 <-- open for analysis;
#X obj 27 452 tgl 16 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0 1;
#X connect 48 0 47 0;
#X connect 54 0 53 0;
#X connect 60 0 64 0;
#X connect 63 0 60 0;
#X connect 65 0 64 1;
#X connect 66 0 64 2;
#X connect 67 0 64 3;
#X connect 68 0 64 4;
#X connect 69 0 64 5;
#X connect 70 0 64 6;
#X connect 71 0 64 7;
#X connect 72 0 65 0;
#X connect 73 0 66 0;
#X connect 74 0 67 0;
#X connect 75 0 68 0;
#X connect 76 0 69 0;
#X connect 77 0 70 0;
#X connect 78 0 71 0;
#X connect 80 0 81 0;
#X connect 81 0 79 0;
#X connect 81 0 88 0;
#X connect 82 0 85 1;
#X connect 82 0 85 0;
#X connect 83 0 82 0;
#X connect 84 0 83 0;
#X connect 84 0 86 0;
#X connect 85 0 81 1;
#X connect 88 0 87 0;
#X connect 88 1 87 1;
#X connect 90 0 84 0;
#X coords 0 -1 1 1 350 300 1 2 2;
